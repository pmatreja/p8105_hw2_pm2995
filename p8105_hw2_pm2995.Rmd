---
title: "p8105_hw2_pm2995"
author: "Priyal"
date: "9/25/2018"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggridges)
```

### Problem 1.1: Read and clean the data as instructed

```{r}
nyc_transit = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",col_names = TRUE) %>%
  
  janitor::clean_names() %>% 
  
 select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE"))
```

### Problem 1.2 
Describing the data set

Dataset focuses on NYC transit data and has collection of information related to each subway station entrance and exit. We have edited some information from the raw data and now our data set has variables; line, station name, station lattitude, longitude, route 1 to 11, entrance type, entry, vending and compliance with ADA.

Steps used for cleaning the data:

* Read in the data

* Cleaned the variable names using clean_names of janitor function which converted them into all lower snake case.

* Used select to retain the variable names as per instructions.

* Used mutate to recode the entry variable from character(YES/NO) to logical(TRUE/FALSE).

```{r}
nrow(nyc_transit)
ncol(nyc_transit)
```

The dimensions of the data set are  `r nrow(nyc_transit)` x `r ncol(nyc_transit)`. No, the data doesn't look tidy because the data for the route variable are spread across eleven columns and is difficult to read. There can be a better way to present it. Using the gather function here can be helpful.

### Problem 1.3: Answering the set of questions

* How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St A/B/C/D; 125st 1; 125st 4/5); the distinct function may be useful here.


```{r}
nyc_transit %>%  
  distinct(station_name, line, .keep_all = TRUE) %>% 
  nrow()
``` 

Answer: No. of distinct stations = 465


* How many stations are ADA compliant?

```{r}
  nyc_transit %>%
  distinct(station_name, line, .keep_all = TRUE) %>% 
  filter(ada == TRUE) %>% 
  nrow()
```

Answer: No. of ADA compliant stations = 84


* What proportion of station entrances / exits without vending allow entrance?

```{r}
{nyc_transit %>% 
  filter(vending == "NO") %>% 
  filter(entry == "TRUE") %>% 
  nrow()} /
  
{nyc_transit %>% 
  filter(vending == "NO") %>% 
  nrow()}

```

I filtered all the stations for which vending is NO and entry = TRUE and divided it with the total stations for which vending is no.

Answer: Proportion of station entrances / exits without vending that allow entrance = 0.3770492 or 37.7 % 


### Problem 1.4: Reformating the data so that route number and route name are distinct variables

```{r}
nyc_transit_reformat = 
  gather(nyc_transit, key = route_number, value = route_name, route1:route11) 

nyc_transit_reformat
```


* How many distinct stations serve the A train? 

```{r}
  nyc_transit_reformat %>%
  filter(route_name == "A") %>% 
  distinct(station_name, line, route_name,.keep_all = TRUE) %>%  
nrow()
```

Answer: Distinct stations that serve train A = 60


* Of the stations that serve the A train, how many are ADA compliant?

```{r}
nyc_transit_reformat %>% 
  filter(route_name == "A") %>%
  distinct(station_name, line, route_name,.keep_all = TRUE) %>%
  filter(ada == TRUE) %>%
  nrow()
```

Answer: Of the stations that serve the train A, no. of stations that are ADA compliant are 17. 

I have used .keep_all in last two code chunks with the distinct function because I wanted to keep rest of the variable data associated with the distinct stations for further use.

### Problem 2.1: Read and clean the Mr. Trash Wheel sheet


```{r}
library(readxl)
trash_wheel_data = read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "Mr. Trash Wheel", range = cell_cols("A:N"), col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  filter(!(dumpster == "NA")) %>% 
  mutate(sports_balls = round(sports_balls)) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

