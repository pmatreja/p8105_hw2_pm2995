p8105\_hw2\_pm2995
================
Priyal
9/25/2018

### Problem 1.1: Read and clean the data as instructed

``` r
nyc_transit = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",col_names = TRUE) %>%
  
  janitor::clean_names() %>% 
  
 select(line:entry, vending, ada) %>% 
  mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE"))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

### Problem 1.2

Describing the data set

Dataset focuses on NYC transit data and has collection of information related to each subway station entrance and exit. We have edited some information from the raw data and now our data set has variables; line, station name, station lattitude, longitude, route 1 to 11, entrance type, entry, vending and compliance with ADA.

Steps used for cleaning the data:

-   Read in the data

-   Cleaned the variable names using clean\_names of janitor function which converted them into all lower snake case.

-   Used select to retain the variable names as per instructions.

-   Used mutate to recode the entry variable from character(YES/NO) to logical(TRUE/FALSE).

``` r
nrow(nyc_transit)
```

    ## [1] 1868

``` r
ncol(nyc_transit)
```

    ## [1] 19

The dimensions of the data set are 1868 x 19. No, the data doesn't look tidy because the data for the route variable are spread across eleven columns and is difficult to read. There can be a better way to present it. Using the gather function here can be helpful.

### Problem 1.3: Answering the set of questions

-   How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St A/B/C/D; 125st 1; 125st 4/5); the distinct function may be useful here.

``` r
nyc_transit %>%  
  distinct(station_name, line, .keep_all = TRUE) %>% 
  nrow()
```

    ## [1] 465

Answer: No. of distinct stations = 465

-   How many stations are ADA compliant?

``` r
  nyc_transit %>%
  distinct(station_name, line, .keep_all = TRUE) %>% 
  filter(ada == TRUE) %>% 
  nrow()
```

    ## [1] 84

Answer: No. of ADA compliant stations = 84

-   What proportion of station entrances / exits without vending allow entrance?

``` r
{nyc_transit %>% 
  filter(vending == "NO") %>% 
  filter(entry == "TRUE") %>% 
  nrow()} /
  
{nyc_transit %>% 
  filter(vending == "NO") %>% 
  nrow()}
```

    ## [1] 0.3770492

I filtered all the stations for which vending is NO and entry = TRUE and divided it with the total stations for which vending is no.

Answer: Proportion of station entrances / exits without vending that allow entrance = 0.3770492 or 37.7 %

### Problem 1.4: Reformating the data so that route number and route name are distinct variables

``` r
nyc_transit_reformat = 
  gather(nyc_transit, key = route_number, value = route_name, route1:route11) 

nyc_transit_reformat
```

    ## # A tibble: 20,548 x 10
    ##    line  station_name station_latitude station_longitu… entrance_type entry
    ##    <chr> <chr>                   <dbl>            <dbl> <chr>         <chr>
    ##  1 4 Av… 25th St                  40.7            -74.0 Stair         TRUE 
    ##  2 4 Av… 25th St                  40.7            -74.0 Stair         TRUE 
    ##  3 4 Av… 36th St                  40.7            -74.0 Stair         TRUE 
    ##  4 4 Av… 36th St                  40.7            -74.0 Stair         TRUE 
    ##  5 4 Av… 36th St                  40.7            -74.0 Stair         TRUE 
    ##  6 4 Av… 45th St                  40.6            -74.0 Stair         TRUE 
    ##  7 4 Av… 45th St                  40.6            -74.0 Stair         TRUE 
    ##  8 4 Av… 45th St                  40.6            -74.0 Stair         TRUE 
    ##  9 4 Av… 45th St                  40.6            -74.0 Stair         TRUE 
    ## 10 4 Av… 53rd St                  40.6            -74.0 Stair         TRUE 
    ## # ... with 20,538 more rows, and 4 more variables: vending <chr>,
    ## #   ada <lgl>, route_number <chr>, route_name <chr>

-   How many distinct stations serve the A train?

``` r
  nyc_transit_reformat %>%
  filter(route_name == "A") %>% 
  distinct(station_name, line, route_name,.keep_all = TRUE) %>%  
nrow()
```

    ## [1] 60

Answer: Distinct stations that serve train A = 60

-   Of the stations that serve the A train, how many are ADA compliant?

``` r
nyc_transit_reformat %>% 
  filter(route_name == "A") %>%
  distinct(station_name, line, route_name,.keep_all = TRUE) %>%
  filter(ada == TRUE) %>%
  nrow()
```

    ## [1] 17

Answer: Of the stations that serve the train A, no. of stations that are ADA compliant are 17.

I have used .keep\_all in last two code chunks with the distinct function because I wanted to keep rest of the variable data associated with the distinct stations for further use.

### Problem 2.1: Read and clean the Mr. Trash Wheel sheet

``` r
library(readxl)
trash_wheel_data = read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "Mr. Trash Wheel", range = cell_cols("A:N"), col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  filter(!(dumpster == "NA")) %>% 
  mutate(sports_balls = round(sports_balls)) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

### Problem 2.2: Reading and cleaning precipitation data for 2016 and 2017

``` r
precipitation_2016 =
  read_excel(path = "./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2016 Precipitation", range = "A2:B14", col_names = TRUE) %>%
  janitor::clean_names() %>% 
  filter(!is.na(total)) %>% 
  mutate(year = 2016) %>% 
  rename(precipitation = total)

precipitation_2017 =
  read_excel(path = "./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2017 Precipitation", range = "A2:B14", col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(total)) %>% 
  mutate(year = 2017) %>% 
  rename(precipitation = total)
```

Combining datasets

``` r
precipitation_combined = 
  full_join(precipitation_2016, precipitation_2017) %>% 
  mutate(month = month.name[month])
```

    ## Joining, by = c("month", "precipitation", "year")

Also, stacking them using the bind\_rows is also giving us the exact same result

``` r
precipitation_combined_alternate = 
  bind_rows(precipitation_2016, precipitation_2017) %>% 
  mutate(month = month.name[month])
```

### Problem 2.3: Writing a paragraph about the data and answering certain questions.

Data from the Mr. Trash Wheel sheet

Mr. Trash Wheel is a water wheel vessel removing trash flowing down the Jones Fall river in Baltimore state. The original dataset describes the content and the amount of trash collected by the dumpster. The data is available by the date of collection of the trash. After doing the instructed modifications on the original dataset, the resulting dataset includes 216 rows and 14 columns. The key variables included are the dumpster number, date when it was collected, amount of trash (by weight and volume), the content (plastics, grocery bags, sports balls, cigarette buts, etc.) and the approximate number of homes powered using the energy generated from the trash. The dataset includes data from 16th May 2014 till 19th August 2017. During this period the total amount of litter that was collected is 704.44. Looking at the data, it appears that cigarette butts are the most common form of trash and glass bottles the least common.

The precipitation data sets for the year 2016 has 12 rows and 3 columns. The mean precipitation for the year 2016 is 3.3291667. The precipitation data sets for the year 2017 has 8 rows and 3 column. The mean precipitation for the year 2017 is 3.74125. The key variables for both the datasets are month, corresponding precipitation for that month and the year. The combined precipitation dataset for 2016 and 2017 includes 20 observations for 3 variables.

-   For available data, what was the total precipitation in 2017?

``` r
sum(precipitation_2017$precipitation)
```

    ## [1] 29.93

Answer: The total precipitation in 2017 is 29.93

-   What was the median number of sports balls in a dumpster in 2016?

``` r
  trash_wheel_data %>%  
  filter(year == 2016) %>% 
  pull(sports_balls) %>% 
  median(na.rm = TRUE)
```

    ## [1] 26

Answer: The median number of sports balls in a dumpster in 2016 are 26.
